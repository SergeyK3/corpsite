ТЕХНИЧЕСКОЕ ЗАДАНИЕ
Система личных кабинетов и контроля задач
Версия 1.0 (финальная)
Настоящее техническое задание является консолидированной версией ТЗ 0.1–0.4 и фиксирует согласованную архитектуру, бизнес‑процессы и требования к системе формирования, контроля и утверждения отчетов.
1. Назначение системы
Система предназначена для постановки задач, формирования отчетов, их многоуровневого утверждения и управленческого контроля в условиях иерархической и матричной структуры управления.
2. Организационная модель
Поддерживается матричная структура подчиненности. Один сотрудник или подразделение может подчиняться нескольким руководителям (административная и функциональная линии). Основание — оргсхема (Visio 2007).
3. Модель данных (логический уровень)
СУБД: PostgreSQL.
Типы идентификаторов: bigint.

Ключевые сущности:
• Users — сотрудники (SSO через Google Account, Telegram ID — опционально);
• Roles — роли;
• OrgUnits — подразделения;
• UserSupervisors — матрица подчиненности (admin / functional);
• Tasks — задачи;
• TaskReports — отчеты (отдельная сущность);
• TaskStatuses — справочник статусов;
• Notifications — лог уведомлений;
• AuditLog — журнал аудита.
4. Статусы задач
Статусы жизненного цикла задачи:
• В работе;
• Ожидается отчёт;
• Ожидается утверждение;
• Выполнено;
• В архиве.

Статусы описывают только процесс выполнения задачи и не фиксируют управленческие подписи.
5. Отчеты и утверждение
Отчет хранится в сущности TaskReports и содержит ссылку на файл.
Факт утверждения фиксируется полями approved_at и approved_by.
Используется один цикл утверждения: при возврате на доработку поля утверждения очищаются.
6. Комментарии
В TaskReports используется одно поле текущего комментария, допускающее перезапись. История изменений комментариев не хранится, но все изменения фиксируются в AuditLog.
7. Аудит и безопасность
AuditLog фиксирует: кто, что, когда изменил, значения до и после изменения.
Отсутствие контактных данных не блокирует работу системы, влияет только на уведомления.
8. Регламент отчетности (кратко)
Месячный цикл отчетности с поэтапной сдачей: исполнитель → руководитель отдела → заместитель → директор. Недельные отчеты рассматриваются как промежуточные и будут внедряться после стабилизации месячного цикла.
9. Источники данных
• Файл «Задачи.xlsx»: Контакты, Регулярные задачи, разовые задачи, справочник статусов.
• Документ «Сценарий формирования и утверждения отчетов.docx».
10. Ограничения и допущения
Исполнитель задачи задается через роль. Уведомления реализуются асинхронно и не являются критичными для бизнес‑логики.
11. Дальнейшие шаги
1) Утверждение ТЗ как базового документа.
2) Проектирование физической модели БД (DDL).
3) BPMN‑описание процесса месячной отчетности.
4) Реализация MVP без уведомлений.
5) Подключение Telegram‑бота и визуализации.
